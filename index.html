<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GuestTap — Welcome</title>
<meta name="description" content="Tap to join Wi-Fi and see house info for your stay." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%230b7285%22/><text x=%2250%25%22 y=%2258%25%22 font-size=%2256%22 text-anchor=%22middle%22 fill=%22white%22 font-family=%22Arial%2C%20sans-serif%22>GT</text></svg>">
<style>
  :root{
    --accent-hue: 190;                /* tweak this for brand color */
    --accent: hsl(var(--accent-hue) 85% 32%);
    --accent-2: hsl(var(--accent-hue) 85% 42%);
    --bg: #0b1220;
    --text: #0f172a;
    --muted:#64748b;
    --card:#ffffffcc;                  /* glassy */
    --stroke:#e7eef6;
    --shadow: 0 20px 40px rgb(2 8 23 / .12);
  }
  @media (prefers-color-scheme: dark){
    :root{
      --text:#e5edf6; --muted:#9fb2c9; --card:#0b1324cc; --stroke:#22304a;
      --shadow: 0 20px 50px rgb(0 0 0 / .35);
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text);
    background:
      radial-gradient(1200px 600px at 10% -10%, hsl(var(--accent-hue) 95% 55% / .12), transparent 60%),
      radial-gradient(1000px 500px at 110% 10%, hsl(260 90% 60% / .10), transparent 60%),
      linear-gradient(180deg, #f6fbff 0%, #eef5ff 40%, #f7fafc 100%);
  }
  @media (prefers-color-scheme: dark){
    body{ background:
      radial-gradient(1200px 600px at 10% -10%, hsl(var(--accent-hue) 95% 55% / .25), transparent 60%),
      radial-gradient(1000px 500px at 110% 10%, hsl(260 90% 60% / .20), transparent 60%),
      linear-gradient(180deg, #070b14 0%, #0a1424 60%, #0b1220 100%);
    }
  }
  .wrap{max-width:880px;margin:auto;padding:28px}
  header{display:flex;align-items:center;gap:14px;margin-bottom:14px}
  .logo{
    width:56px;height:56px;border-radius:14px;
    background:linear-gradient(135deg, var(--accent), var(--accent-2));
    box-shadow:0 10px 18px hsl(var(--accent-hue) 90% 30% / .35);
    display:grid;place-items:center;color:white;font-weight:800;letter-spacing:.5px
  }
  h1{font-size:24px;line-height:1.15;margin:0}
  p.lead{margin:4px 0 0;color:var(--muted)}
  .card{
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    background:var(--card);
    border:1px solid var(--stroke);
    border-radius:18px;
    padding:22px;
    box-shadow:var(--shadow);
    animation:pop .35s ease-out both;
  }
  @keyframes pop{from{opacity:0; transform:translateY(6px) scale(.985)}}
  h2{margin:0 0 6px 0;font-size:20px}
  .grid{display:grid;gap:12px}
  @media(min-width:760px){ .grid{grid-template-columns:1fr 1fr} }
  .field{border:1px solid var(--stroke);border-radius:12px;padding:14px;display:flex;justify-content:space-between;align-items:center;background:#fff8; }
  @media (prefers-color-scheme: dark){ .field{background:#0e1a30aa} }
  .label{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
  .value{font-weight:700;word-break:break-all;margin-top:2px}
  .btn{
    appearance:none;border:none;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer;
    background:var(--accent);color:#fff;box-shadow:0 8px 18px hsl(var(--accent-hue) 90% 30% / .35);
    transition:transform .06s ease, filter .2s ease;
  }
  .btn:hover{filter:brightness(1.05)}
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:transparent;color:inherit;border:1px solid var(--stroke);box-shadow:none}
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .notes{margin-top:8px}
  .muted{color:var(--muted);font-size:13px}
  footer{margin:16px auto 0;text-align:center;color:var(--muted);font-size:13px}
  .hidden{display:none}

  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgb(2 8 23 / .55);display:none}
  .modal{position:fixed;inset:0;display:grid;place-items:center;pointer-events:none}
  .modal .panel{pointer-events:auto;width:min(680px,92vw)}
  .modal.show .modal-backdrop{display:block}
  .modal.show .panel{animation:pop .2s ease-out both}

  /* tiny icon buttons */
  .icon{width:18px;height:18px;vertical-align:-3px;margin-right:6px}
  .qr{margin-top:10px;text-align:center}
  input.small{border:1px solid var(--stroke);padding:8px;border-radius:8px;width:100%;background:transparent;color:inherit}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">GT</div>
      <div>
        <h1>GuestTap</h1>
        <p class="lead">Instant Wi-Fi & house info for your stay.</p>
      </div>
    </header>

    <section class="card" role="main" aria-live="polite">
      <p class="muted">Property</p>
      <h2 id="propName">Loading…</h2>

      <div id="unknown" class="muted hidden">Unknown property ID — showing safe defaults.</div>

      <div class="grid" style="margin-top:10px">
        <div class="field" aria-label="Wi-Fi network">
          <div>
            <div class="label">Network (SSID)</div>
            <div id="ssid" class="value">—</div>
          </div>
          <button id="copySsid" class="btn secondary" title="Copy SSID">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="9" y="9" width="13" height="13" rx="2" /><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            Copy
          </button>
        </div>

        <div class="field" aria-label="Wi-Fi password">
          <div>
            <div class="label">Password</div>
            <div id="password" class="value">••••••••</div>
            <div class="muted">Tap “Reveal” to view or copy</div>
          </div>
          <button id="revealBtn" class="btn" title="Reveal / Copy password">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"/><circle cx="12" cy="12" r="3"/></svg>
            Reveal
          </button>
        </div>
      </div>

      <div class="notes">
        <div class="label">House info</div>
        <div id="houseNotes" class="muted">—</div>
      </div>

      <div class="row">
        <button id="showRules" class="btn secondary">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 2h9a2 2 0 0 1 2 2v16l-6-3-6 3V4a2 2 0 0 1 2-2Z"/></svg>
          House Rules
        </button>
        <a id="hostContact" href="#" class="btn">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M22 16.92V21a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 3 7.18 2 2 0 0 1 5 5h4.09a2 2 0 0 1 2 1.72l.57 3.22a2 2 0 0 1-.55 1.86l-1.27 1.27a16 16 0 0 0 6.88 6.88l1.27-1.27a2 2 0 0 1 1.86-.55l3.22.57A2 2 0 0 1 22 16.92z"/></svg>
          Contact Host
        </a>
      </div>

      <div class="qr">
        <p class="muted">NFC didn’t fire? Scan or visit this URL:</p>
        <input id="directUrl" class="small" readonly />
        <div style="margin-top:8px" id="qrImage"></div>
      </div>
    </section>

    <footer>GuestTap • Pilot</footer>
  </div>

  <!-- Rules Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="panel card">
      <h3 style="margin:0 0 8px 0">House Rules</h3>
      <div class="muted" id="rulesText">• No smoking inside<br>• Quiet after 10 PM<br>• Dispose trash in bins</div>
      <div class="row" style="justify-content:flex-end;margin-top:16px">
        <button id="closeModal" class="btn">Close</button>
      </div>
    </div>
  </div>

<script>
/* =================== Data (pilot) =================== */
const properties = {
  "PROPERTY1": {
    name: "Brown Villas — Apt 5",
    ssid: "BrownVillasGuest",
    password: "Welcome2025!",
    notes: "Check-out 11 AM. Shoes off inside. Parking: spot #4. Thermostat: 70–74°F.",
    phone: "+12568984613",
    rules: "• No smoking inside\n• Quiet after 10 PM\n• Please rinse dishes\n• Trash bins by driveway"
  },
  "DEMO1": {
    name: "Brown Villas - Apt 5",
    ssid: "ATTMCa7wy4",
    password: "s=gkq62#+243",
    notes: "Demo property for testing only.",
    phone: "+10000000000",
    rules: "• Demo rule A\n• Demo rule B\n• Demo rule C"
  }
};

/* =================== Helpers =================== */
const el = id => document.getElementById(id);
const getParam = k => new URL(location.href).searchParams.get(k);

/* =================== Init =================== */
const p = getParam('p') || 'DEMO1';
const prop = properties[p];
const propNameEl = el('propName');
const ssidEl = el('ssid');
const pwdEl = el('password');
const notesEl = el('houseNotes');
const contactA = el('hostContact');
const directUrl = el('directUrl');
const rulesText = el('rulesText');

if(!prop){
  el('unknown').classList.remove('hidden');
  propNameEl.textContent = `${p} (unknown)`;
  ssidEl.textContent = "GuestTap_WiFi";
  pwdEl.dataset.raw = "guesttap-default";
  notesEl.textContent = "No property-specific notes found. Please contact host.";
  contactA.removeAttribute('href');
  rulesText.textContent = "• Quiet hours 10 PM–7 AM\n• Please respect neighbors";
}else{
  propNameEl.textContent = prop.name;
  ssidEl.textContent = prop.ssid;
  pwdEl.dataset.raw = prop.password;
  notesEl.textContent = prop.notes;
  contactA.href = "tel:" + prop.phone;
  rulesText.textContent = prop.rules || rulesText.textContent;
}
pwdEl.textContent = "••••••••";
directUrl.value = location.href;

/* Copy/Reveal */
el('revealBtn').addEventListener('click', () => {
  const raw = pwdEl.dataset.raw || "";
  if(pwdEl.textContent.startsWith('•')){
    pwdEl.textContent = raw;
    el('revealBtn').innerHTML = `<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 8l6 6-6 6"/><path d="M8 8l-6 6 6 6"/></svg> Copy`;
  }else{
    navigator.clipboard?.writeText(raw).then(()=>{
      el('revealBtn').textContent = "Copied!";
      setTimeout(()=> el('revealBtn').innerHTML =
        `<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8Z"/><circle cx="12" cy="12" r="3"/></svg> Reveal`, 1400);
    });
  }
});
el('copySsid').addEventListener('click', ()=>{
  const t = ssidEl.textContent.trim();
  navigator.clipboard?.writeText(t).then(()=>{
    el('copySsid').textContent = "Copied!";
    setTimeout(()=> el('copySsid').textContent="Copy", 1200);
  });
});

/* Modal */
const modal = document.getElementById('modal');
const openModal = ()=>{ modal.classList.add('show'); modal.setAttribute('aria-hidden','false'); }
const closeModal = ()=>{ modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); }
el('showRules').addEventListener('click', openModal);
el('closeModal').addEventListener('click', closeModal);
modal.querySelector('.modal-backdrop').addEventListener('click', closeModal);
document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });

/* QR (simple, fine for pilot) */
const qrDiv = el('qrImage');
const qrUrl = encodeURIComponent(location.href);
const img = document.createElement('img');
img.alt = 'QR code'; img.width=150; img.height=150;
img.src = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${qrUrl}&chld=L|1`;
qrDiv.appendChild(img);
</script>
</body>
</html>
